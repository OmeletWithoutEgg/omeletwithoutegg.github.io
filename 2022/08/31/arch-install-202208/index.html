<!doctype html><html lang=en-us data-theme=dark><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>又是 Arch Install：在 HP 筆電上面雙系統與 secure boot | 蛋餅的競程隨筆</title><meta name=description content="一個廢人想寫題解，所以他想辦法弄網站"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><link rel=canonical href=https://omeletwithoutegg.github.io/2022/08/31/arch-install-202208/><link rel=icon type=image/png href=/images/favicon.ico><link rel=stylesheet href=/scss/style.min.7fd2a1fa996870aa3927c20e35cc12a66351328b0a369daefadb25f0c021c715.css integrity="sha256-f9Kh+plocKo5J8IONcwSpmNRMosKNp2u+tsl8MAhxxU=" crossorigin=anonymous><link rel=stylesheet href=/css/highlight-block.css><link rel=stylesheet href=/css/search.css><link rel=stylesheet href=/css/toggle-switch.css><script src=/lib/jquery/jquery.min.js></script><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><meta property="og:url" content="https://omeletwithoutegg.github.io/2022/08/31/arch-install-202208/"><meta property="og:site_name" content="蛋餅的競程隨筆"><meta property="og:title" content="又是 Arch Install：在 HP 筆電上面雙系統與 secure boot"><meta property="og:description" content="緣由 這麼快的時間就發下一篇 archlinux 的文，我真的覺得我越來越是 BTW I use arch 的人了XD
不過這次裝 archlinux 也是有理由的，因為我從 NPSC 拿到的筆電的電池壞掉了，如果沒有插著電就會直接關機，想說就順便換了一台新的筆電。因為奇怪的堅持不想用 Mac，選了選之後最後是挑 HP pavilion plus 14。"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-31T17:16:20+08:00"><meta property="article:modified_time" content="2022-08-31T17:16:20+08:00"><meta property="article:tag" content="Arch"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Pacman"><meta property="article:tag" content="KDE"><meta property="article:tag" content="Plasma"><meta property="article:tag" content="Grub"><meta name=twitter:card content="summary"><meta name=twitter:title content="又是 Arch Install：在 HP 筆電上面雙系統與 secure boot"><meta name=twitter:description content="緣由 這麼快的時間就發下一篇 archlinux 的文，我真的覺得我越來越是 BTW I use arch 的人了XD
不過這次裝 archlinux 也是有理由的，因為我從 NPSC 拿到的筆電的電池壞掉了，如果沒有插著電就會直接關機，想說就順便換了一台新的筆電。因為奇怪的堅持不想用 Mac，選了選之後最後是挑 HP pavilion plus 14。"><script async src="https://www.googletagmanager.com/gtag/js?id=G-0ME10Z2L0D"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0ME10Z2L0D")}</script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/about/>About</a></li><li><a href=/posts/>Posts</a></li><li><a href=/resources/>Resources</a></li><li><a href=/search/>Search</a></li><li><a href=/tags/>Tags</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://omeletwithoutegg.github.io/2022/07/17/kde-zoom-shortcut/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=https://omeletwithoutegg.github.io/2022/09/07/kdeconnect/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&text=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&title=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&is_video=false&description=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot&body=Check out this article: https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&title=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&title=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&name=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot&description=%3ch1%20id%3d%22%e7%b7%a3%e7%94%b1%22%3e%e7%b7%a3%e7%94%b1%3c%2fh1%3e%0a%3cp%3e%e9%80%99%e9%ba%bc%e5%bf%ab%e7%9a%84%e6%99%82%e9%96%93%e5%b0%b1%e7%99%bc%e4%b8%8b%e4%b8%80%e7%af%87%20archlinux%20%e7%9a%84%e6%96%87%ef%bc%8c%e6%88%91%e7%9c%9f%e7%9a%84%e8%a6%ba%e5%be%97%e6%88%91%e8%b6%8a%e4%be%86%e8%b6%8a%e6%98%af%20%3ccode%3eBTW%20I%20use%20arch%3c%2fcode%3e%20%e7%9a%84%e4%ba%ba%e4%ba%86XD%3cbr%3e%0a%e4%b8%8d%e9%81%8e%e9%80%99%e6%ac%a1%e8%a3%9d%20archlinux%20%e4%b9%9f%e6%98%af%e6%9c%89%e7%90%86%e7%94%b1%e7%9a%84%ef%bc%8c%e5%9b%a0%e7%82%ba%e6%88%91%e5%be%9e%20NPSC%20%e6%8b%bf%e5%88%b0%e7%9a%84%e7%ad%86%e9%9b%bb%e7%9a%84%e9%9b%bb%e6%b1%a0%e5%a3%9e%e6%8e%89%e4%ba%86%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%b2%92%e6%9c%89%e6%8f%92%e8%91%97%e9%9b%bb%e5%b0%b1%e6%9c%83%e7%9b%b4%e6%8e%a5%e9%97%9c%e6%a9%9f%ef%bc%8c%e6%83%b3%e8%aa%aa%e5%b0%b1%e9%a0%86%e4%be%bf%e6%8f%9b%e4%ba%86%e4%b8%80%e5%8f%b0%e6%96%b0%e7%9a%84%e7%ad%86%e9%9b%bb%e3%80%82%e5%9b%a0%e7%82%ba%e5%a5%87%e6%80%aa%e7%9a%84%e5%a0%85%e6%8c%81%e4%b8%8d%e6%83%b3%e7%94%a8%20Mac%ef%bc%8c%e9%81%b8%e4%ba%86%e9%81%b8%e4%b9%8b%e5%be%8c%e6%9c%80%e5%be%8c%e6%98%af%e6%8c%91%20HP%20pavilion%20plus%2014%e3%80%82%3c%2fp%3e" aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&t=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#事前需要的材料>事前需要的材料</a></li><li><a href=#大綱>大綱</a></li><li><a href=#prepare-installation-medium>prepare installation medium</a></li><li><a href=#in-windows>In Windows</a><ul><li><a href=#windows-安裝>Windows 安裝</a></li><li><a href=#關閉快速啟動fast-startup>關閉「快速啟動」（fast startup）</a></li><li><a href=#儲存bitlocker-recoverykey>儲存bitlocker recoverykey</a></li><li><a href=#確認開機模式>確認開機模式</a></li><li><a href=#分割磁碟>分割磁碟</a></li></ul></li><li><a href=#in-bios-interface>In BIOS interface</a><ul><li><a href=#關閉-secure-boot>關閉 Secure Boot</a></li><li><a href=#開機順序>開機順序</a></li></ul></li><li><a href=#in-live-environment>In Live Environment</a><ul><li><a href=#網路>網路</a></li><li><a href=#萬年流程>萬年流程</a><ul><li><a href=#分割磁碟-1>分割磁碟</a></li></ul></li><li><a href=#格式化>格式化</a><ul><li><a href=#mount-磁碟分區>mount 磁碟分區</a></li><li><a href=#pacstrap-time>pacstrap time</a></li></ul></li><li><a href=#in-chroot>In Chroot</a></li><li><a href=#繼續處理驅動程式>繼續處理驅動程式</a><ul><li><a href=#查看網卡型號>查看網卡型號</a></li><li><a href=#解決音效卡驅動問題>解決音效卡驅動問題</a></li></ul></li><li><a href=#離開-live-environment-之後的網路>離開 live environment 之後的網路</a></li><li><a href=#bootloader--secure-boot>bootloader & secure boot</a><ul><li><a href=#systemd-boot>systemd-boot</a></li><li><a href=#secure-boot>secure boot</a></li></ul></li><li><a href=#桌面環境>桌面環境</a></li></ul></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">又是 Arch Install：在 HP 筆電上面雙系統與 secure boot</h1><div class=meta><span class=author itemprop=author itemscope itemtype=http://schema.org/Person><span itemprop=name>2qbingxuan&nbsp;</span></span><div class=postdate><time datetime="2022-08-31 17:16:20 +0800 +0800" itemprop=datePublished>2022-08-31</time></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/arch/ rel=tag>arch</a>
,
<a class=tag-link href=/tags/linux/ rel=tag>linux</a>
,
<a class=tag-link href=/tags/pacman/ rel=tag>pacman</a>
,
<a class=tag-link href=/tags/KDE/ rel=tag>KDE</a>
,
<a class=tag-link href=/tags/plasma/ rel=tag>plasma</a>
,
<a class=tag-link href=/tags/grub/ rel=tag>grub</a>
,
<a class=tag-link href=/tags/systemd-boot/ rel=tag>systemd-boot</a>
,
<a class=tag-link href=/tags/secure-boot/ rel=tag>secure-boot</a></div></div></header><div class=content itemprop=articleBody><h1 id=緣由>緣由</h1><p>這麼快的時間就發下一篇 archlinux 的文，我真的覺得我越來越是 <code>BTW I use arch</code> 的人了XD<br>不過這次裝 archlinux 也是有理由的，因為我從 NPSC 拿到的筆電的電池壞掉了，如果沒有插著電就會直接關機，想說就順便換了一台新的筆電。因為奇怪的堅持不想用 Mac，選了選之後最後是挑 HP pavilion plus 14。</p><p>上次因為是想要整台變成 Linux 所以比較不用煩惱一些問題，這次我希望能夠雙系統 Windows 並且可以玩一些遊戲，會需要有 secure boot 的功能所以也有比較不同的設定；此外這次也有碰到各種不同的問題，作為紀錄以及希望能幫助有遇到類似問題的人就發一篇文吧 :P</p><h1 id=流水帳>流水帳</h1><h2 id=事前需要的材料>事前需要的材料</h2><p>不一定要用但我有用到</p><ul><li>USB device * 2 （一支會要灌 iso 進去讓資料整個不見，另一支是拿來備份一些小東西的）</li><li>可以上網的手機 & 電腦 & wifi-AP</li><li>電源線</li></ul><h2 id=大綱>大綱</h2><p>首先直接跑 Windows 安裝引導把 Windows 用正常的方式安裝好，接著使用 USB 開機的方式啟動 live environment，在各種 trial-and-error 之後終於把各種硬體問題排除，最後再裝 Desktop Environment 與各種 GUI/CLI apps。</p><h2 id=prepare-installation-medium>prepare installation medium</h2><p>請參考 <a href=https://wiki.archlinux.org/title/USB_flash_installation_medium#Using_win32diskimager>archwiki</a></p><ol><li>將一支可以清空的隨身碟插在可以上網的電腦當中</li><li>下載 <a href=https://archlinux.org/download/>archlinux_iso</a>。假設下載的 iso 檔放在 <code>$HOME/Downloads/archlinux-2022.08.05-x86_64.iso</code>。</li><li>將 iso 檔寫入隨身碟。<br>如果是 linux 的話，可以看插入前後 <code>/dev/</code> 多了什麼東西去看隨身碟對應的 character device 是什麼，這邊假設是 <code>/dev/sda</code> 並使用 <code>dd</code> 指令寫入。<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo dd bs<span style=color:#f92672>=</span>4M <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>$HOME/Downloads/archlinux-2022.08.05-x86_64.iso of<span style=color:#f92672>=</span>/dev/sda status<span style=color:#f92672>=</span>progress
</span></span></code></pre></td></tr></table></div></div>如果是 windows 可以用 Rufus 等等。</li></ol><h2 id=in-windows>In Windows</h2><h3 id=windows-安裝>Windows 安裝</h3><p>下一步、下一步、下一步。</p><h3 id=關閉快速啟動fast-startup>關閉「快速啟動」（fast startup）</h3><p>打開「控制台」的「電源選項」，選擇「變更目前無法使用的設定」並取消勾選「開啟快速啟動」。</p><h3 id=儲存bitlocker-recoverykey>儲存bitlocker recoverykey</h3><p>bitlocker 這件事是 ZCK 有提過的，於是我就上網查，發現似乎不用把 bitlocker 關掉，<br>但是應該要把 bitlocker recoverykey 備份下來，幸好有備份（？）某個時間點還真的有跳出來。</p><p>P.S. 寫完這篇的前面這部份一段時間後，剛剛需要用的時候差點以為自己把他刪掉了，真是嚇死人，奉勸大家這個東西要好好備份。</p><h3 id=確認開機模式>確認開機模式</h3><p>現在的電腦應該都是 UEFI 模式了，不過可以確認一下。<br>按 <code>Win + R</code> 執行 <code>msinfo32</code>，檢查 BIOS 模式是「UEFI」還是「Legacy BIOS」</p><h3 id=分割磁碟>分割磁碟</h3><p>現在的電腦應該都是 GPT 吧 oao<br>按 <code>Win + X</code>，選擇磁碟管理並分割出一塊給 Arch 用的空間（所謂「壓縮磁碟機」）。<br>預設可能會有好幾個分區，例如 EFI、Microsoft reserved、Windows recovery environment 等等，<br>不用動其他的分區，只切最大的那塊（通常就是 C 槽）切出一塊空間給 Arch。</p><h2 id=in-bios-interface>In BIOS interface</h2><p>這台 HP 的 BIOS 介面跟之前我那台 ASUS 不一樣，有一點不習慣。<br>在開機的時候按一些功能鍵就會打開 BIOS setup 的介面。</p><ul><li>F10：調整 BIOS 設定</li><li>F9：進入 boot menu。</li><li>F2/F3：進入系統診斷/測試</li></ul><h3 id=關閉-secure-boot>關閉 Secure Boot</h3><p>因為 Arch 官網的 Live ISO 應該是不支援 Secure boot 的，所以必須要把 boot option 當中的 secure boot 先暫時關掉。</p><h3 id=開機順序>開機順序</h3><p>在這個 BIOS 介面當中有四種 boot 的選項，先把 USB 開機調到最上面才可以用剛剛燒錄的 Live USB 開機。</p><hr><h2 id=in-live-environment>In Live Environment</h2><p>在使用 Live USB 開機之後，會進入熟悉的 archiso 畫面。<br>最精彩的各種問題…</p><h3 id=網路>網路</h3><p>第一步當然就是確認網路連線了，我在這邊遇到了第一個大問題就是這個 Live ISO 沒有偵測到我這台 HP 的網卡，<br>第一次遇到這種問題，經過各種搜尋之後得知：</p><ol><li>沒有偵測到網卡大概是因為驅動程式的問題</li><li>要先上網才比較好裝驅動程式，但這台筆電又沒有乙太網路線的接孔（當然可能可以外接各種線解決）<br>幸好有一種對我比較方便的方法是用手機接 USB 分享網路（Andriod tethering），只要把手機接到電腦上就可以用手機分享的網路上網。<br>（見 reference [5] [6]）</li></ol><p>把手機接到電腦上，在 Andriod 手機上選擇用 USB 分享行動網路，就可以用 <code>ip link</code> 看到 介面名稱了。使用 <code>dhcpcd</code> 連上網路。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ip link
</span></span><span style=display:flex><span>dhcpcd enp0s20f0u1 <span style=color:#75715e># result of ip link</span>
</span></span></code></pre></td></tr></table></div></div><p>接著用這個勉強的手機 5G 網路趕快下載一些基本的套件還有所需要的驅動程式</p><h3 id=萬年流程>萬年流程</h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ping archlinux.org
</span></span><span style=display:flex><span>timedatectl set-ntp true
</span></span></code></pre></td></tr></table></div></div><h4 id=分割磁碟-1>分割磁碟</h4><p>使用 <code>fdisk</code>, <code>gdisk</code>, <code>cfdisk</code> 等工具將剛剛在 Windows 切割的一大塊磁碟再細分，切出 2G 的 swap 以及分別拿來當 <code>/home</code> 與 <code>/</code> 的分區。<br>注意不要刪除原本 Windows 建的那些分區，此外也不需要額外建一個 EFI system partition，直接用原本的就好了。<br>（見 <a href=https://wiki.archlinux.org/title/Dual_boot_with_Windows#UEFI_systems>archwiki</a>）</p><h3 id=格式化>格式化</h3><p>在我的系統上，硬碟是 <code>/dev/nvme0n1</code>，因為 Windows 原本就有四個分區 <code>/dev/nvme0n1p1</code> 到 <code>/dev/nvme0n1p4</code>，所以我拿來當 <code>/</code>，<code>/home</code> 跟 swap 的分區就是從 5 開始編號了。我選用經典的 ext4 格式。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkfs.ext4 /dev/nvme0n1p5
</span></span><span style=display:flex><span>mkfs.ext4 /dev/nvme0n1p6
</span></span><span style=display:flex><span>mkswap /dev/nvmepn1p7
</span></span></code></pre></td></tr></table></div></div><h4 id=mount-磁碟分區>mount 磁碟分區</h4><p>把剛剛所切割好的磁碟分區放進 linux 檔案系統裡面，讓裡面的資料真正的變成我們系統上的資料夾，這件事稱作 mount。<br>我實在不太會解釋 mount 是做什麼的，總之我們要把切來當 <code>/</code> 和 <code>/home</code> 的磁碟分區放到 <code>/mnt/</code> 和 <code>/mnt/home</code>。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount /dev/nvme0n1p5 /mnt/
</span></span><span style=display:flex><span>mount /dev/nvmepn1p6 /mnt/home --mkdir
</span></span><span style=display:flex><span>swapon /dev/nvmepn1p7
</span></span></code></pre></td></tr></table></div></div><p>有人會注意到 archwiki 上有叫我們建一個 <code>/boot</code> 的分區，不過因為是雙系統，所以直接使用 windows 原本的 EFI 分區就可以了，在我的電腦上是 <code>/dev/nvme0n1p1</code>。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount /dev/nvme0n1p1 /mnt/boot --mkdir
</span></span></code></pre></td></tr></table></div></div><h4 id=pacstrap-time>pacstrap time</h4><p>下一步就是下載所有需要的套件到硬碟上了。因為手機網路特別爛，所以可以先用 <code>reflector</code> 或是 <code>rankmirrors</code> 等工具來設定使用離自己比較近、速度比較快的鏡像源（mirror）。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pacman -S reflector
</span></span><span style=display:flex><span>vim /etc/xdg/reflector/reflector.conf <span style=color:#75715e># --sort rate 意思是按速度 --country 可以選 Taiwan</span>
</span></span><span style=display:flex><span>systemctl start reflector
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pacstrap /mnt base linux linux-firmware git curl gvim base-devel
</span></span></code></pre></td></tr></table></div></div><h3 id=in-chroot>In Chroot</h3><p>因為平常直接使用 <code>root</code> 使用者比較不安全之類的緣故，安裝 AUR 和使用 KDE plasma 都要另外開一個非 <code>root</code> 的正常使用者。<br>先順便 <code>genfstab</code>，再在安裝好的系統 chroot 之後新增一個非 <code>root</code> 使用者，設定密碼以及設為 sudoer。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</span></span><span style=display:flex><span>arch-chroot /mnt
</span></span><span style=display:flex><span>useradd -m omelet
</span></span><span style=display:flex><span>groupadd sudo
</span></span><span style=display:flex><span>usermod -aG sudo omelet
</span></span><span style=display:flex><span>passwd omelet
</span></span><span style=display:flex><span>vim /etc/sudoers <span style=color:#75715e># uncomment the %sudo line, :w! to save</span>
</span></span></code></pre></td></tr></table></div></div><p>一些參考 <a href=https://wiki.archlinux.org/title/Installation_guide>archwiki</a> 的基本設定</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ln -sf /usr/share/zoneinfo/Asia/Taipei /etc/localtime
</span></span><span style=display:flex><span>hwclock --systohc
</span></span><span style=display:flex><span>vim /etc/locale.gen <span style=color:#75715e># uncomment en_US.UTF-8 and zh_TW.UTF-8</span>
</span></span><span style=display:flex><span>locale-gen
</span></span><span style=display:flex><span>vim /etc/hostname <span style=color:#75715e># your hostname</span>
</span></span><span style=display:flex><span>vim /etc/locale.conf <span style=color:#75715e># LANG=en_US.UTF-8</span>
</span></span></code></pre></td></tr></table></div></div><p>因為已經有一個有密碼的 sudo user 了，所以就不讓 <code>root</code> 有可以登入的密碼。</p><p>接著安裝 AUR helper yay。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo -iu omelet
</span></span><span style=display:flex><span>git clone https://aur.archlinux.org/yay-bin.git
</span></span><span style=display:flex><span>cd yay-bin <span style=color:#f92672>&amp;&amp;</span> makepkg -csi
</span></span><span style=display:flex><span>exit
</span></span></code></pre></td></tr></table></div></div><h3 id=繼續處理驅動程式>繼續處理驅動程式</h3><h4 id=查看網卡型號>查看網卡型號</h4><p>用 root 權限執行</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lspci -vnnk | grep -i --context<span style=color:#f92672>=</span><span style=color:#ae81ff>20</span> net
</span></span></code></pre></td></tr></table></div></div><p>得知這台的網卡型號是 <code>realtek</code> 的 <code>[10ec:b852]</code>。<br>查了一堆資料，最後找到應該可以用 <code>rtl8852be</code> 這個 kernel module。<br>(見 reference [7])<br>正好這也有被放在 AUR 上，因此直接用 <code>yay</code> 安裝。很感謝維護這個 module 的人。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yay -S rtl8852be-dkms-git <span style=color:#75715e># run as normal user</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=解決音效卡驅動問題>解決音效卡驅動問題</h4><p>這是在安裝桌面環境之後才發現的不過就放到這邊來講。<br><code>lspci -vnnk</code> 之後發現好像有寫需要一些 kernel module 而且沒有 load 到。</p><p>同樣 google 了一下，得知應該是要安裝 <code>sof-firmware</code>，使用 <code>pacman</code> 安裝。<br>（見 reference [8]）</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pacman -S sof-firmware
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=離開-live-environment-之後的網路>離開 live environment 之後的網路</h3><p>雖然離開 live environment 之後還是可以用 tethering 、<code>dhcpcd</code> 的方式上網，不過只要網卡有設定好，理論上重開機之後執行 <code>ip link</code> 就會跳出除了 <code>lo</code> 之外的一個無線網卡介面（我的是 <code>wlo1</code>），再搭配一個正常的 wireless network daemon 就可以了。<br>可以用 <code>iwctl</code>、<code>networkmanager</code> 等，這邊用的是 <code>networkmanager</code>。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pacman -S networkmanager
</span></span><span style=display:flex><span>systemctl enable networkmanager
</span></span></code></pre></td></tr></table></div></div><p>重開機之後，要連上 AP 可以用 <code>sudo nmtui</code>。</p><h3 id=bootloader--secure-boot>bootloader & secure boot</h3><p>原本選用 GRUB，裝好 GRUB 之後第一次打開 Windows，才發現想玩的遊戲需要 secure boot。我想也是為了防作弊之類的吧（？）<br>研究了一下如何同時雙系統又 secure boot，看起來 GRUB 似乎是很難設定 secure boot，最後決定把 bootloader 換成 systemd-boot，雖然介面是更加的醜陋，不過不太常會需要去 access 那個介面，所以我就妥協了。</p><h4 id=systemd-boot>systemd-boot</h4><p>請參考 <a href=https://wiki.archlinux.org/title/Systemd-boot>archwiki</a></p><p>請確保是 UEFI 開機模式，然後用 root 權限（還在 chroot 裡面）執行</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bootctl install
</span></span></code></pre></td></tr></table></div></div><p>接著有兩個地方要設定，第一個是要新增開機選單有哪些 entry，第二個是要設定開機選單的選項。<br>新增一個 <code>$esp/loader/entries/arch.conf</code> 的檔案，內容是</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>title   Arch Linux
</span></span><span style=display:flex><span>linux   /vmlinuz-linux
</span></span><span style=display:flex><span>initrd  /initramfs-linux.img
</span></span><span style=display:flex><span>options root=PARTUUID=XXXXXXXXXXXXXXXXXX rw loglevel=3 quiet
</span></span></code></pre></td></tr></table></div></div><p>如果剛剛 <code>mount</code> 的時候是照著上面所說的 <code>mount</code>，那麼 <code>$esp</code> 應該就當成是 <code>/boot</code> 就可以了。<br>基本上 options 我是從 GRUB 那邊的設定抄來的，PARTUUID 可以用 <code>blkid /dev/xxx</code> 得到。</p><p>如果還想要再加入其他開機選項，例如在 options 或是 initrd 有不同設定的話，可以再新增其他檔案。<br>很方便的是不用做任何設定，<code>windows</code> 和 <code>reboot into UEFI firmware</code> 就會自動被加進開機選單了。</p><p>而開機選單的選項，也就是 <code>$esp/loader/loader.conf</code>，我試了幾個，最後還是決定用預設的（<code>loader.conf</code> 空白）就好。<br><code>timeout</code> 預設是 0，也就是說除非開機時按著一些按鍵不然不會進入開機選單而是直接用預設的 <code>arch.conf</code> 開機，也比較不會看到那醜死人的畫面，賞心悅目。</p><h4 id=secure-boot>secure boot</h4><p>原本查到看起來超麻煩，直到找到了 <code>sbctl</code> 這個工具。<br>（雖然我是先找到 <code>sbctl</code>，再試 GRUB，最後才換成 systemd-boot 的）</p><p>大致上是照著 reference [10] 的方式，然後我記得有一篇文章是講說遇到權限不足的話要去 UEFI firmware 那邊調整，基本上在這邊會需要重開機，在 UEFI firmware 介面刪掉原本的 secure boot key，接著在 disable secure boot 的情況下進來 arch ，然後做這些簽名之後重開機再 enable secure boot。<br>記得可能會需要 bitlocker recoverkey！</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pacman -S sbctl 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sbctl create-keys
</span></span><span style=display:flex><span>sbctl enroll-keys --microsoft
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># sign all the files that let `sbctl verify` fail</span>
</span></span><span style=display:flex><span>sbctl sign -s /boot/EFI/Linux/linux.efi
</span></span><span style=display:flex><span>sbctl sign -s /boot/EFI/Linux/fallback.efi
</span></span><span style=display:flex><span>sbctl sign -s /boot/EFI/systemd/systemd-bootx64.efi
</span></span><span style=display:flex><span>sbctl sign -s /boot/EFI/Boot/bootx64.efi
</span></span><span style=display:flex><span>sbctl sign -s /boot/EFI/Microsoft/bootmgfw.efi
</span></span><span style=display:flex><span>sbctl sign -s /boot/EFI/Microsoft/bootmgr.efi
</span></span><span style=display:flex><span>sbctl sign -s /boot/EFI/Microsoft/memtest.efi
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sbctl verify
</span></span><span style=display:flex><span>sbctl status
</span></span><span style=display:flex><span>sbctl list-files
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Verify that the sbctl pacman hook works on a kernel upgrade.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Ensure that the string &#34;Signing EFI binaries...&#34; appears.</span>
</span></span><span style=display:flex><span>pacman -S linux
</span></span></code></pre></td></tr></table></div></div><h3 id=桌面環境>桌面環境</h3><p>這可以等到確定可以不靠 tethering 上網之後再裝，畢竟很肥又不是最優先的。<br>我選擇繼續使用 KDE，最近嘗試了一些比 KDE 輕量很多的 Tiling Window Manager，但老實說很多事情都搞不定，沒有一個整合好的 DE 所有東西都要自己設定真的蠻麻煩的，比如說游標在 KDE 進系統選單修改後就直接可以了，但其實是要把同樣的一個游標主題設定放到 <code>.gtkrc</code> 或是 <code>.config/gtk*</code> 之類的地方，然後我怎麼搞就是搞不定。<br>KDE 對我來說最大的缺點就是他一開就吃了不少記憶體，但換成 WM 也只是少 1G 左右，在換新電腦這件事的前提下，我已經不再需要擔心記憶體的問題了（希望）</p><p>而且我並沒有感受到 Tiling 或是 Workspace 這種概念很有用，我甚至在 KDE 或 Windows 上面都不會使用第二個 Desktop（我自己感覺等同於 i3 或 awesomeWM 的 workspace）。<br>keyboard-driven 或是 highly customizable 我也沒有感覺很特別。非 KDE 預設的快捷鍵我新增了兩組，分別是用 <code>ctrl + alt + t</code> 去開 terminal以及用 <code>ctrl + alt + r</code> 去使用 <code>rofi</code> 開啟應用程式。<code>rofi</code> 真的蠻 fancy 的，用起來很舒服。</p><p>以下是部份我有安裝的 package。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pacman -S plasma-meta
</span></span><span style=display:flex><span>pacman -S --needed <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>           git zsh openssh gvim <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>           wezterm <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>           dolphin ark kate <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>           mpv gwenview okular spectacle <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>           qutebrowser <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>           rofi pass
</span></span></code></pre></td></tr></table></div></div><hr><h1 id=結語>結語</h1><p>就像欣穆老師說的一樣，原本可能很簡單的過程，每個人都可能遇到各種不同的軟硬體、環境問題，排除這些問題我覺得蠻有成就感的。<br>雖然真的很耗費時間。</p><p>此外現在還有一些未知的問題，具體來說，KDE 預設的 Screen Energy Saving 設定中，螢幕過一定時間就會關閉，之前我都是只要有動觸控版或是鍵盤，螢幕就會重新打開，但現在不是很聽話。在影片暫停時讓螢幕關閉，再按空白鍵，可以發現影片會繼續播放（有聲音），但螢幕好像遲遲無法開啟；如果把亮度調整為 0 也會出現相同的症狀， <del>初步懷疑是因為 intel graphics 之類的東西，不是很懂 @@ 如果有人願意看到這裡還知道怎麼解決這個問題的話，歡迎來幫助我(X</del> 後來查到好像是 OLED 螢幕的問題，很高興竟然在前一兩個禮拜這個問題 upstream 已經有 fix 了，靜候它被加進 ArchLinux repository 的佳音。（見 reference [12] [13])</p><h1 id=reference>reference</h1><ul><li>[1] <a href=https://wiki.archlinux.org/title/Dual_boot_with_Windows>https://wiki.archlinux.org/title/Dual_boot_with_Windows</a></li><li>[2] <a href=https://rupru8.pixnet.net/blog/post/349765618-%E9%9B%99%E7%B3%BB%E7%B5%B1>https://rupru8.pixnet.net/blog/post/349765618-%E9%9B%99%E7%B3%BB%E7%B5%B1</a></li><li>[3] <a href=https://www.hp.com/us-en/shop/tech-takes/how-to-enter-bios-setup-windows-pcs>https://www.hp.com/us-en/shop/tech-takes/how-to-enter-bios-setup-windows-pcs</a></li><li>[4] <a href=https://medium.com/hunter-cheng/%E5%A6%82%E4%BD%95%E5%9C%A8windows-10%E7%B3%BB%E7%B5%B1%E5%AE%89%E8%A3%9Dlinux%E9%9B%99%E7%B3%BB%E7%B5%B1-85ed07813270>https://medium.com/hunter-cheng/%E5%A6%82%E4%BD%95%E5%9C%A8windows-10%E7%B3%BB%E7%B5%B1%E5%AE%89%E8%A3%9Dlinux%E9%9B%99%E7%B3%BB%E7%B5%B1-85ed07813270</a></li></ul><hr><ul><li>[5] <a href=https://unix.stackexchange.com/questions/423256/arch-ip-a-only-shows-lo>https://unix.stackexchange.com/questions/423256/arch-ip-a-only-shows-lo</a></li><li>[6] <a href=https://unix.stackexchange.com/questions/567882/wifi-menu-not-working-during-installation-of-arch-linux-no-wifi-interface-is-sh>https://unix.stackexchange.com/questions/567882/wifi-menu-not-working-during-installation-of-arch-linux-no-wifi-interface-is-sh</a></li><li>[7] <a href=https://askubuntu.com/questions/1412450/network-driver-for-realtek-10ecb852>https://askubuntu.com/questions/1412450/network-driver-for-realtek-10ecb852</a></li><li>[8] <a href="https://bbs.archlinux.org/viewtopic.php?id=273328">https://bbs.archlinux.org/viewtopic.php?id=273328</a></li></ul><hr><ul><li>[9] <a href=https://wiki.archlinux.org/title/USB_flash_installation_medium>https://wiki.archlinux.org/title/USB_flash_installation_medium</a></li></ul><hr><ul><li>[10] <a href=https://saligrama.io/blog/post/upgrading-personal-security-evil-maid/#enrolling-your-key-into-secure-boot>https://saligrama.io/blog/post/upgrading-personal-security-evil-maid/#enrolling-your-key-into-secure-boot</a></li><li>[11] <a href=https://wiki.archlinux.org/title/Unified_Extensible_Firmware_Interface/Secure_Boot#sbctl>https://wiki.archlinux.org/title/Unified_Extensible_Firmware_Interface/Secure_Boot#sbctl</a></li></ul><hr><ul><li>[12] <a href="https://bugs.kde.org/show_bug.cgi?id=447475">https://bugs.kde.org/show_bug.cgi?id=447475</a></li><li>[13] <a href=https://gitlab.freedesktop.org/drm/intel/-/issues/3657>https://gitlab.freedesktop.org/drm/intel/-/issues/3657</a></li></ul></div></article><div class=blog-post-comments><div id=disqus_thread><script type=text/javascript>(function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="omeletwithoutegg",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><li><a href=/>Home</a></li><li><a href=/about/>About</a></li><li><a href=/posts/>Posts</a></li><li><a href=/resources/>Resources</a></li><li><a href=/search/>Search</a></li><li><a href=/tags/>Tags</a></li></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#事前需要的材料>事前需要的材料</a></li><li><a href=#大綱>大綱</a></li><li><a href=#prepare-installation-medium>prepare installation medium</a></li><li><a href=#in-windows>In Windows</a><ul><li><a href=#windows-安裝>Windows 安裝</a></li><li><a href=#關閉快速啟動fast-startup>關閉「快速啟動」（fast startup）</a></li><li><a href=#儲存bitlocker-recoverykey>儲存bitlocker recoverykey</a></li><li><a href=#確認開機模式>確認開機模式</a></li><li><a href=#分割磁碟>分割磁碟</a></li></ul></li><li><a href=#in-bios-interface>In BIOS interface</a><ul><li><a href=#關閉-secure-boot>關閉 Secure Boot</a></li><li><a href=#開機順序>開機順序</a></li></ul></li><li><a href=#in-live-environment>In Live Environment</a><ul><li><a href=#網路>網路</a></li><li><a href=#萬年流程>萬年流程</a><ul><li><a href=#分割磁碟-1>分割磁碟</a></li></ul></li><li><a href=#格式化>格式化</a><ul><li><a href=#mount-磁碟分區>mount 磁碟分區</a></li><li><a href=#pacstrap-time>pacstrap time</a></li></ul></li><li><a href=#in-chroot>In Chroot</a></li><li><a href=#繼續處理驅動程式>繼續處理驅動程式</a><ul><li><a href=#查看網卡型號>查看網卡型號</a></li><li><a href=#解決音效卡驅動問題>解決音效卡驅動問題</a></li></ul></li><li><a href=#離開-live-environment-之後的網路>離開 live environment 之後的網路</a></li><li><a href=#bootloader--secure-boot>bootloader & secure boot</a><ul><li><a href=#systemd-boot>systemd-boot</a></li><li><a href=#secure-boot>secure boot</a></li></ul></li><li><a href=#桌面環境>桌面環境</a></li></ul></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&text=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&title=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&is_video=false&description=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot&body=Check out this article: https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&title=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&title=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&name=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot&description=%3ch1%20id%3d%22%e7%b7%a3%e7%94%b1%22%3e%e7%b7%a3%e7%94%b1%3c%2fh1%3e%0a%3cp%3e%e9%80%99%e9%ba%bc%e5%bf%ab%e7%9a%84%e6%99%82%e9%96%93%e5%b0%b1%e7%99%bc%e4%b8%8b%e4%b8%80%e7%af%87%20archlinux%20%e7%9a%84%e6%96%87%ef%bc%8c%e6%88%91%e7%9c%9f%e7%9a%84%e8%a6%ba%e5%be%97%e6%88%91%e8%b6%8a%e4%be%86%e8%b6%8a%e6%98%af%20%3ccode%3eBTW%20I%20use%20arch%3c%2fcode%3e%20%e7%9a%84%e4%ba%ba%e4%ba%86XD%3cbr%3e%0a%e4%b8%8d%e9%81%8e%e9%80%99%e6%ac%a1%e8%a3%9d%20archlinux%20%e4%b9%9f%e6%98%af%e6%9c%89%e7%90%86%e7%94%b1%e7%9a%84%ef%bc%8c%e5%9b%a0%e7%82%ba%e6%88%91%e5%be%9e%20NPSC%20%e6%8b%bf%e5%88%b0%e7%9a%84%e7%ad%86%e9%9b%bb%e7%9a%84%e9%9b%bb%e6%b1%a0%e5%a3%9e%e6%8e%89%e4%ba%86%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%b2%92%e6%9c%89%e6%8f%92%e8%91%97%e9%9b%bb%e5%b0%b1%e6%9c%83%e7%9b%b4%e6%8e%a5%e9%97%9c%e6%a9%9f%ef%bc%8c%e6%83%b3%e8%aa%aa%e5%b0%b1%e9%a0%86%e4%be%bf%e6%8f%9b%e4%ba%86%e4%b8%80%e5%8f%b0%e6%96%b0%e7%9a%84%e7%ad%86%e9%9b%bb%e3%80%82%e5%9b%a0%e7%82%ba%e5%a5%87%e6%80%aa%e7%9a%84%e5%a0%85%e6%8c%81%e4%b8%8d%e6%83%b3%e7%94%a8%20Mac%ef%bc%8c%e9%81%b8%e4%ba%86%e9%81%b8%e4%b9%8b%e5%be%8c%e6%9c%80%e5%be%8c%e6%98%af%e6%8c%91%20HP%20pavilion%20plus%2014%e3%80%82%3c%2fp%3e" aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fomeletwithoutegg.github.io%2f2022%2f08%2f31%2farch-install-202208%2f&t=%e5%8f%88%e6%98%af%20Arch%20Install%ef%bc%9a%e5%9c%a8%20HP%20%e7%ad%86%e9%9b%bb%e4%b8%8a%e9%9d%a2%e9%9b%99%e7%b3%bb%e7%b5%b1%e8%88%87%20secure%20boot" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2025 Omelet</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/about/>About</a></li><li><a href=/posts/>Posts</a></li><li><a href=/resources/>Resources</a></li><li><a href=/search/>Search</a></li><li><a href=/tags/>Tags</a></li></ul></nav></div></footer></div><script src=/js/main.js></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script src=/lib/clipboard/clipboard.min.js></script><script>$(function(){let e='<span class="btn-copy tooltipped tooltipped-sw" aria-label="Copy to clipboard!" style="z-index: 9999">';e+='<i class="far fa-clone"></i>',e+="</span>",$(".highlight table").before(e);const t=new ClipboardJS(".btn-copy",{text:function(e){const t='code[data-lang]:not([data-lang=""]) > span',n=Array.from(e.nextElementSibling.querySelectorAll(t)),s=n.map(e=>e.innerText).join("");return s}});t.on("success",function(e){e.trigger.setAttribute("aria-label","Copied!"),e.clearSelection()}),t.on("error",function(e){console.error("Action:",e.action),console.error("Trigger:",e.trigger)})})</script><button id=dark-mode-toggle-btn aria-label="Toggle dark mode" style=display:none>
<svg width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path class="sun" d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42M12 17.5a5.5 5.5.0 100-11 5.5 5.5.0 000 11z"/><path class="moon" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
</button>
<script>function getSavedTheme(){return localStorage.getItem("theme")||"dark"}function saveTheme(e){localStorage.setItem("theme",e)}function applyTheme(e){document.documentElement.setAttribute("data-theme",e)}function toggleTheme(){const t=getSavedTheme(),e=t==="dark"?"white":"dark";applyTheme(e),saveTheme(e)}applyTheme(getSavedTheme()),window.addEventListener("storage",function(e){e.key==="theme"&&applyTheme(e.newValue)})</script><script type=text/javascript src=/js/canvas-nest.js></script><canvas id=bganim-canvas></canvas>
<button id=bganim-toggle-btn aria-label="Toggle background animation" style=display:none>
<svg width="25" height="25" viewBox="0 0 200 200"><polygon class="hexagon" points="100,20 170,60 170,140 100,180 30,140 30,60" fill="none" stroke="currentColor" stroke-width="15"/></svg>
</button>
<script>let movingPoints=null;function initMovingPoints(){if(movingPoints!==null)return;movingPoints=createMovingPoints({canvas:document.getElementById("bganim-canvas"),config:{count:90,color:"0,200,100",opacity:.5}})}function getSavedEnabledState(){const e=localStorage.getItem("bganim-enabled"),t=window.innerWidth>=480,n=e==="true";return e===null?t:n}function saveEnabledState(e){localStorage.setItem("bganim-enabled",e)}function applyEnabledState(e){document.documentElement.setAttribute("data-bganim-enabled",e),e?(initMovingPoints(),movingPoints.startAnimation()):movingPoints!==null&&movingPoints.stopAnimation()}function toggleEnabledState(){const t=getSavedEnabledState(),e=!t;applyEnabledState(e),saveEnabledState(e)}$(function(){applyEnabledState(getSavedEnabledState())}),window.addEventListener("storage",function(e){e.key==="bganim-enabled"&&applyEnabledState(e.newValue==="true")})</script><script>$("#nav > ul").append("<li></li>"),$("#dark-mode-toggle-btn").appendTo("#nav > ul > li:last-child"),$("#dark-mode-toggle-btn").click(toggleTheme),$("#dark-mode-toggle-btn").show(),$("#bganim-toggle-btn").appendTo("#nav > ul > li:last-child"),$("#bganim-toggle-btn").click(toggleEnabledState),$("#bganim-toggle-btn").show()</script></body></html>